(self.webpackChunkwbolt_plugins=self.webpackChunkwbolt_plugins||[]).push([[577],{8538:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a=o(1293),i={name:"Base",data:function(){return{form_changed:0,is_loaded:0,action:wb_cnf.action||{act:"",fetch:"",push:""},is_pro:0,filter_domain:"",cnf:{},opt:{filter:{},rule:{},proxy_manual:[]},tooltips:{active_method:"自动采集，仅当贴入外链图片至编辑器时以默认采集模式执行；手动采集则需要手动点击保存站外图片时执行。",proxy_ip:"若自定义代理IP地址无用户名及密码，则留空即可。仅勾选自动采集默认，自动采集图片才使用代理服务器采集。",width_limit:"不超过指定宽度，即若采集图片的宽度像素超出设置值，将压缩为指定值宽度。如要保留原尺寸图片，使用默认值即可。",img_rename:"自定义文件名可以使用一个或者多个命名规则参数。比如可以设置为%filename%%date%。",img_filter:"如需过滤多张图像，以英文逗号分隔。",exc_domain:"比如CDN/图床/云存储等图片链接对于域名地址。"}}},components:{},created:function(){this._get_data()},filters:{},methods:{_get_data:function(){var e=this;(0,a.getData)({action:e.action.act,do:e.action.fetch}).then((function(t){e.opt=t.data.opt,e.cnf=t.data.cnf,e.check_ext(),e.is_loaded=1}))},updateData:function(){var e=this;(0,a.saveData)({action:e.action.act,do:e.action.push,opt:e.opt,key:"base"}).then((function(t){!t.code&&wbui.toast("保存成功"),e.form_changed=1}))},set_df_mode:function(e){var t=this;t.check_ext(),"proxy"==e.target.value?(e.preventDefault(),wbui.confirm("请设置代理。",{btn:["去设置","取消"],yes:function(){location.hash="scProxy"}})):"ext"==e.target.value&&(t.is_pro||(e.preventDefault(),wbui.confirm("该功能为Pro版本专属。",{btn:["了解详情","取消"],yes:function(){t.$router.push({path:"/extension"})}})))},addNewProxy:function(){this.opt.proxy_manual.push({name:"",ip:"",port:"",user:"",pwd:""})},removeProxy:function(e){var t=this;wbui.confirm("确认移除？",(function(){t.opt.proxy_manual.splice(e,1)}))},set_proxy:function(e){var t=this;for(var o in t.opt.proxy)t.opt.proxy[o]=0;t.opt.proxy[e]=1},del_filter_domain:function(e){this.opt.filter.domain.splice(e,1)},add_filter_domain:function(){var e=this;e.opt.filter.domain.push(e.filter_domain),e.filter_domain=""},check_ext:function(){imgspider_ver&&window.imgspider&&(this.is_pro=1)}},mounted:function(){this.is_pro=imgspider_ver&&window.imgspider?1:0},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(e,t,o){this.form_changed>1?wbui.confirm("您修改的设置尚未保存，确定离开此页面吗？",(function(){return o(),!1}),(function(){return o(!1),!1})):o()}};t.Z=i},3577:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>i.X,default:()=>n});var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wbs-content base-code"},[o("div",{staticClass:"wbs-main"},[e.is_loaded?o("div",[e._m(0),e._v(" "),o("div",{staticClass:"sc-body "},[o("table",{staticClass:"wbs-form-table"},[o("tr",[o("th",{staticClass:"row w8em"},[e._v("\n              自动或手动 "),o("wbs-tooltip",{attrs:{"data-msg":e.tooltips.active_method}})],1),e._v(" "),o("td",[o("div",{staticClass:"selector-bar"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.mode,expression:"opt.mode"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.opt.mode,"0")},on:{change:function(t){return e.$set(e.opt,"mode","0")}}}),e._v(" 自动")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.mode,expression:"opt.mode"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.opt.mode,"1")},on:{change:function(t){return e.$set(e.opt,"mode","1")}}}),e._v(" 手动")])])])]),e._v(" "),o("tr",[o("th",{staticClass:"row w8em"},[e._v("\n              默认采集模式\n            ")]),e._v(" "),o("td",[o("div",{staticClass:"selector-bar"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.df_mode,expression:"opt.df_mode"}],attrs:{type:"radio",value:"none"},domProps:{checked:e._q(e.opt.df_mode,"none")},on:{change:function(t){return e.$set(e.opt,"df_mode","none")}}}),e._v(" 服务器采集")]),e._v(" "),e.opt.proxy_manual.length<1?o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.df_mode,expression:"opt.df_mode"}],attrs:{type:"radio",value:"proxy"},domProps:{checked:e._q(e.opt.df_mode,"proxy")},on:{click:e.set_df_mode,change:function(t){return e.$set(e.opt,"df_mode","proxy")}}}),e._v(" 代理采集")]):e._e(),e._v(" "),e._l(e.opt.proxy_manual,(function(t,a){return o("label",{key:a},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.df_mode,expression:"opt.df_mode"}],attrs:{type:"radio"},domProps:{value:a,checked:e._q(e.opt.df_mode,a)},on:{change:function(t){return e.$set(e.opt,"df_mode",a)}}}),e._v(" 代理["+e._s(t.name)+"]采集")])})),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.df_mode,expression:"opt.df_mode"}],attrs:{type:"radio",value:"ext"},domProps:{checked:e._q(e.opt.df_mode,"ext")},on:{click:e.set_df_mode,change:function(t){return e.$set(e.opt,"df_mode","ext")}}}),e._v(" "),o("span",{staticClass:"ib"},[e._v("浏览器采集")]),e._v(" "),o("i",{staticClass:"tag-pro"},[e._v("Pro")])])],2),e._v(" "),o("div",{staticClass:"description mt"})])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("\n              特色图片\n            ")]),e._v(" "),o("td",[o("div",{staticClass:"selector-bar"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.thumbnail,expression:"opt.thumbnail"}],attrs:{type:"checkbox","true-value":"1"},domProps:{checked:Array.isArray(e.opt.thumbnail)?e._i(e.opt.thumbnail,null)>-1:e._q(e.opt.thumbnail,"1")},on:{change:function(t){var o=e.opt.thumbnail,a=t.target,i=!!a.checked&&"1";if(Array.isArray(o)){var s=e._i(o,null);a.checked?s<0&&e.$set(e.opt,"thumbnail",o.concat([null])):s>-1&&e.$set(e.opt,"thumbnail",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.opt,"thumbnail",i)}}}),e._v(" "),o("span",[e._v("默认采集第一张图片为特色图片")])])])])])])]),e._v(" "),o("div",{staticClass:"sc-header",attrs:{id:"scProxy"}},[o("h3",[o("strong",[e._v("代理设置 "),o("wbs-tooltip",{attrs:{"data-msg":e.tooltips.proxy_ip}})],1)])]),e._v(" "),o("div",{staticClass:"sc-body"},[o("table",{staticClass:"wbs-table"},[e._m(1),e._v(" "),o("tbody",e._l(e.opt.proxy_manual,(function(t,a){return o("tr",{key:a},[o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"v.name"}],staticClass:"wbs-input",domProps:{value:t.name},on:{input:function(o){o.target.composing||e.$set(t,"name",o.target.value)}}})]),e._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.ip,expression:"v.ip"}],staticClass:"wbs-input",domProps:{value:t.ip},on:{input:function(o){o.target.composing||e.$set(t,"ip",o.target.value)}}})]),e._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.port,expression:"v.port"}],staticClass:"wbs-input",domProps:{value:t.port},on:{input:function(o){o.target.composing||e.$set(t,"port",o.target.value)}}})]),e._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"v.user"}],staticClass:"wbs-input",domProps:{value:t.user},on:{input:function(o){o.target.composing||e.$set(t,"user",o.target.value)}}})]),e._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"v.pwd"}],staticClass:"wbs-input",attrs:{type:"password"},domProps:{value:t.pwd},on:{input:function(o){o.target.composing||e.$set(t,"pwd",o.target.value)}}})]),e._v(" "),o("td",[o("a",{staticClass:"wb-ctrl-item ctrl-del",attrs:{title:"删除"},on:{click:function(t){return e.removeProxy(a)}}},[o("svg",{staticClass:"wb-icon sico-del"},[o("use",{attrs:{"xlink:href":"#sico-del"}})])])])])})),0)]),e._v(" "),o("p",{staticClass:"align-right mt"},[o("a",{staticClass:"wb-btn",on:{click:e.addNewProxy}},[e._v("+ 添加代理")])])]),e._v(" "),e._m(2),e._v(" "),o("div",{staticClass:"sc-body"},[o("table",{staticClass:"wbs-form-table"},[o("tr",[o("th",{staticClass:"row w8em"},[e._v("尺寸规格 "),o("wbs-tooltip",{attrs:{"data-msg":e.tooltips.width_limit}})],1),e._v(" "),o("td",[o("div",{staticClass:"selector-items-block"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.size,expression:"opt.rule.size"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.opt.rule.size,"0")},on:{change:function(t){return e.$set(e.opt.rule,"size","0")}}}),e._v(" 原尺寸（默认）")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.size,expression:"opt.rule.size"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.opt.rule.size,"1")},on:{change:function(t){return e.$set(e.opt.rule,"size","1")}}}),e._v(" 不超过1080px宽度")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.size,expression:"opt.rule.size"}],attrs:{type:"radio",value:"2"},domProps:{checked:e._q(e.opt.rule.size,"2")},on:{change:function(t){return e.$set(e.opt.rule,"size","2")}}}),e._v(" 不超过720px宽度")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.size,expression:"opt.rule.size"}],attrs:{type:"radio",value:"3"},domProps:{checked:e._q(e.opt.rule.size,"3")},on:{change:function(t){return e.$set(e.opt.rule,"size","3")}}}),e._v(" 不超过"),o("span",{staticClass:"ml"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.custom_size,expression:"opt.rule.custom_size"}],staticClass:"wbs-input w6em",attrs:{placeholder:""},domProps:{value:e.opt.rule.custom_size},on:{input:function(t){t.target.composing||e.$set(e.opt.rule,"custom_size",t.target.value)}}}),e._v(" "),o("span",{staticClass:"description"},[e._v("px宽度")])])])])])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("文件名规则 "),o("wbs-tooltip",{attrs:{"data-msg":e.tooltips.img_rename}})],1),e._v(" "),o("td",[o("div",{staticClass:"selector-items-block"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.file_name,expression:"opt.rule.file_name"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.opt.rule.file_name,"0")},on:{change:function(t){return e.$set(e.opt.rule,"file_name","0")}}}),e._v(" 系统自动命名（默认）")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.file_name,expression:"opt.rule.file_name"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.opt.rule.file_name,"1")},on:{change:function(t){return e.$set(e.opt.rule,"file_name","1")}}}),e._v(" 保留原文件名")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.file_name,expression:"opt.rule.file_name"}],attrs:{type:"radio",value:"2"},domProps:{checked:e._q(e.opt.rule.file_name,"2")},on:{change:function(t){return e.$set(e.opt.rule,"file_name","2")}}}),e._v(" 自定义 "),"2"==e.opt.rule.file_name?o("span",{staticClass:"ml"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.custom_name,expression:"opt.rule.custom_name"}],staticClass:"wbs-input wbs-input-short",attrs:{placeholder:""},domProps:{value:e.opt.rule.custom_name},on:{input:function(t){t.target.composing||e.$set(e.opt.rule,"custom_name",t.target.value)}}})]):e._e()])]),e._v(" "),"2"==e.opt.rule.file_name?o("div",{staticClass:"description"},[e._m(3),e._v(" "),o("p",[e._v("%filename% : 原文件名")]),e._v(" "),o("p",[e._v("%date% : 年月日，例：20200101")]),e._v(" "),o("p",[e._v("%year% : 年份，例：2020。")]),e._v(" "),o("p",[e._v("%month% : 月份，例如：01。")]),e._v(" "),o("p",[e._v("%day% : 日期，例如：15。")]),e._v(" "),o("p",[e._v("%random% : 五位数字字母随机码，例如：m1x88。")])]):e._e()])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("标题及替代文本")]),e._v(" "),o("td",[o("div",{staticClass:"selector-items-block"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.title_alt,expression:"opt.rule.title_alt"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.opt.rule.title_alt,"0")},on:{change:function(t){return e.$set(e.opt.rule,"title_alt","0")}}}),e._v(" 保留来源数据（默认）")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.title_alt,expression:"opt.rule.title_alt"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.opt.rule.title_alt,"1")},on:{change:function(t){return e.$set(e.opt.rule,"title_alt","1")}}}),e._v(" 自定义 "),"1"==e.opt.rule.title_alt?o("span",{staticClass:"ml"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.custom_title,expression:"opt.rule.custom_title"}],staticClass:"wbs-input wbs-input-short",attrs:{placeholder:""},domProps:{value:e.opt.rule.custom_title},on:{input:function(t){t.target.composing||e.$set(e.opt.rule,"custom_title",t.target.value)}}})]):e._e()])]),e._v(" "),"1"==e.opt.rule.title_alt?o("div",{staticClass:"description"},[e._m(4),e._v(" "),o("p",[e._v("%filename% : 原文件名")]),e._v(" "),o("p",[e._v("%postname% : 文章标题")])]):e._e()])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("对齐方式")]),e._v(" "),o("td",[o("div",{staticClass:"selector-bar"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.align,expression:"opt.rule.align"}],attrs:{type:"radio",value:"none"},domProps:{checked:e._q(e.opt.rule.align,"none")},on:{change:function(t){return e.$set(e.opt.rule,"align","none")}}}),e._v(" 无（默认）")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.align,expression:"opt.rule.align"}],attrs:{type:"radio",value:"center"},domProps:{checked:e._q(e.opt.rule.align,"center")},on:{change:function(t){return e.$set(e.opt.rule,"align","center")}}}),e._v(" 居中对齐")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.align,expression:"opt.rule.align"}],attrs:{type:"radio",value:"left"},domProps:{checked:e._q(e.opt.rule.align,"left")},on:{change:function(t){return e.$set(e.opt.rule,"align","left")}}}),e._v(" 左对齐")]),e._v(" "),o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.rule.align,expression:"opt.rule.align"}],attrs:{type:"radio",value:"right"},domProps:{checked:e._q(e.opt.rule.align,"right")},on:{change:function(t){return e.$set(e.opt.rule,"align","right")}}}),e._v(" 右对齐")])])])])])]),e._v(" "),e._m(5),e._v(" "),o("div",{staticClass:"sc-body"},[o("table",{staticClass:"wbs-form-table"},[o("tbody",[o("tr",[o("th",{staticClass:"row w8em"},[e._v("\n              过滤指定顺序 "),o("wbs-tooltip",{attrs:{"data-msg":e.tooltips.img_filter}})],1),e._v(" "),o("td",[o("span",[e._v("第")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.filter.except_index,expression:"opt.filter.except_index"}],staticClass:"wbs-input w6em",domProps:{value:e.opt.filter.except_index},on:{input:function(t){t.target.composing||e.$set(e.opt.filter,"except_index",t.target.value)}}}),e._v(" "),o("span",[e._v("张图片")])])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("\n              过滤特定尺寸\n            ")]),e._v(" "),o("td",[o("span",[e._v("宽度像素低于")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.filter.min_width,expression:"opt.filter.min_width"}],staticClass:"wbs-input w6em",domProps:{value:e.opt.filter.min_width},on:{input:function(t){t.target.composing||e.$set(e.opt.filter,"min_width",t.target.value)}}}),e._v(" "),o("span",[e._v("像素")])])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("\n              过滤格式\n            ")]),e._v(" "),o("td",[o("div",{staticClass:"selector-bar"},e._l(e.cnf.filter.type,(function(t){return o("label",{key:t.code},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.filter.type[t.code],expression:"opt.filter.type[item.code]"}],attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(e.opt.filter.type[t.code])?e._i(e.opt.filter.type[t.code],null)>-1:e._q(e.opt.filter.type[t.code],"1")},on:{change:function(o){var a=e.opt.filter.type[t.code],i=o.target,s=i.checked?"1":"0";if(Array.isArray(a)){var r=e._i(a,null);i.checked?r<0&&e.$set(e.opt.filter.type,t.code,a.concat([null])):r>-1&&e.$set(e.opt.filter.type,t.code,a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.opt.filter.type,t.code,s)}}}),e._v(" "),o("span",[e._v(e._s(t.name))])])})),0)])]),e._v(" "),o("tr",[o("th",{staticClass:"row"},[e._v("\n              排除图像域名  "),o("wbs-tooltip",{staticClass:"on-top",attrs:{"data-msg":e.tooltips.exc_domain}})],1),e._v(" "),o("td",[e._l(e.opt.filter.domain,(function(t,a){return o("div",{staticClass:"sc-block"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opt.filter.domain[a],expression:"opt.filter.domain[idx]"}],staticClass:"wbs-input wbs-input-short",domProps:{value:e.opt.filter.domain[a]},on:{input:function(t){t.target.composing||e.$set(e.opt.filter.domain,a,t.target.value)}}}),e._v(" "),o("span",{staticClass:"wb-ctrl-item del",attrs:{title:"删除"},on:{click:function(t){return e.del_filter_domain(a)}}},[o("svg",{staticClass:"wb-icon sico-del"},[o("use",{attrs:{"xlink:href":"#sico-del"}})])])])})),e._v(" "),o("div",{staticClass:"sc-block"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_domain,expression:"filter_domain"}],staticClass:"wbs-input wbs-input-short",attrs:{placeholder:""},domProps:{value:e.filter_domain},on:{input:function(t){t.target.composing||(e.filter_domain=t.target.value)}}}),e._v(" "),o("span",{staticClass:"wb-ctrl-item plus",attrs:{title:"增加"},on:{click:function(t){return e.add_filter_domain()}}},[e._v("+ 增加")])])],2)])])])])]):e._e()]),e._v(" "),e.is_loaded&&!e.is_pro?o("wbs-more-sources"):e._e(),e._v(" "),o("wbs-footer"),e._v(" "),o("wbs-ctrl-bar",{on:{submit:e.updateData}})],1)};a._withStripped=!0;var i=o(8538);const s=i.Z;var r=(0,o(1900).Z)(s,a,[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sc-header"},[o("h3",[o("strong",[e._v("常规设置")])])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("thead",[o("tr",[o("th",[e._v("名称")]),e._v(" "),o("th",[e._v("IP地址")]),e._v(" "),o("th",[e._v("端口")]),e._v(" "),o("th",[e._v("用户名")]),e._v(" "),o("th",[e._v("密码")]),e._v(" "),o("th",[e._v("操作")])])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sc-header",attrs:{id:"scImage"}},[o("h3",[o("strong",[e._v("图片选项")])])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",{staticClass:"mt"},[o("b",[e._v("请选择自定义方式：")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",{staticClass:"mt"},[o("b",[e._v("请选择自定义方式：")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sc-header",attrs:{id:"scRule"}},[o("h3",[o("strong",[e._v("过滤规则")])])])}],!1,null,null,null);r.options.__file="__src/js/setting/views/Base.vue";const n=r.exports}}]);